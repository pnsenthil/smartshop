{"version":3,"file":"index-CVmTW4Ev.js","sources":["../../node_modules/nanoid/url-alphabet/index.js","../../node_modules/nanoid/index.browser.js","../../src/data/catalogue.ts","../../src/data/complements.ts","../../src/data/missions.ts","../../src/catalog.ts","../../src/basketAnalyzer.ts","../../src/candidateGenerator.ts","../../src/nudgeRanker.ts","../../src/throttleManager.ts","../../src/nudgeEngine.ts","../../src/enhancedDemo.ts","../../src/enhancedUI.ts","../../src/main.ts"],"sourcesContent":["export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n","/* @ts-self-types=\"./index.d.ts\" */\nimport { urlAlphabet as scopedUrlAlphabet } from './url-alphabet/index.js'\nexport { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << Math.log2(alphabet.length - 1)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step | 0\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length >= size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size | 0, random)\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array((size |= 0)))\n  while (size--) {\n    id += scopedUrlAlphabet[bytes[size] & 63]\n  }\n  return id\n}\n","// Synthetic 30+ item catalog, adapted to our Product shape at load time\nexport const RawProducts = [\n  { productId: 'pasta-500g', name: \"Sainsbury's Penne Pasta 500g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Pasta & Rice', tags: ['pasta','italian','dried'], diet: ['vegetarian'], price: 1.25, nectarPrice: 1.25, promo: { type: 'multi-buy', value: 2.00, threshold: 2, groupId: 'pasta-deal' }, valueBand: 'value', isInStock: true },\n  { productId: 'pasta-sauce-350g', name: \"Sainsbury's Tomato & Basil Sauce 350g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Cooking Sauces', tags: ['sauce','tomato','pasta-sauce'], diet: ['vegetarian'], price: 0.95, nectarPrice: 0.85, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'falafel-200g', name: \"Sainsbury's Falafel 200g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Middle Eastern', tags: ['falafel','vegan','snack'], diet: ['vegan'], price: 2.50, nectarPrice: 2.50, promo: { type: 'multi-buy', value: 1.00, threshold: 2, groupId: 'deli-pair' }, valueBand: 'balanced', isInStock: true },\n  { productId: 'houmous-200g', name: \"Sainsbury's Houmous 200g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dips & Spreads', tags: ['houmous','vegan','dip'], diet: ['vegan'], price: 1.80, nectarPrice: 1.50, promo: { type: 'multi-buy', value: 1.00, threshold: 2, groupId: 'deli-pair' }, valueBand: 'balanced', isInStock: true },\n  { productId: 'pitta-bread-6pk', name: \"Sainsbury's Pitta Bread 6 Pack\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Bakery', tags: ['bread','pitta'], diet: ['vegan'], price: 1.20, nectarPrice: 1.20, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'bread-400g', name: \"Sainsbury's Wholemeal Bread 400g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Bakery', tags: ['bread','wholemeal'], diet: ['vegetarian'], price: 1.00, nectarPrice: 0.95, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'milk-1l', name: \"Sainsbury's Semi-Skimmed Milk 1L\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['milk','dairy'], diet: ['vegetarian'], price: 0.95, nectarPrice: 0.95, promo: null, valueBand: 'value', isInStock: true, perishableDays: 5 },\n  { productId: 'cheese-200g', name: \"Sainsbury's Cheddar Cheese 200g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['cheese','dairy'], diet: ['vegetarian'], price: 2.50, nectarPrice: 2.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'butter-250g', name: \"Sainsbury's Salted Butter 250g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['butter','dairy'], diet: ['vegetarian'], price: 1.80, nectarPrice: 1.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'premium-pasta-400g', name: \"Sainsbury's Taste the Difference Penne 400g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Pasta & Rice', tags: ['pasta','italian','premium'], diet: ['vegetarian'], price: 2.00, nectarPrice: 1.80, promo: null, valueBand: 'premium', isInStock: true },\n  { productId: 'whole-chicken-1kg', name: \"Sainsbury's Whole Chicken 1kg\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Meat & Poultry', tags: ['chicken','roast'], diet: [], price: 5.50, nectarPrice: 5.50, promo: null, valueBand: 'premium', isInStock: true },\n  { productId: 'potatoes-2kg', name: \"Sainsbury's Maris Piper Potatoes 2kg\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Vegetables', tags: ['potatoes','roast'], diet: ['vegan'], price: 2.20, nectarPrice: 2.20, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'carrots-1kg', name: \"Sainsbury's Carrots 1kg\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Vegetables', tags: ['carrots','roast'], diet: ['vegan'], price: 1.50, nectarPrice: 1.50, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'gravy-granules-200g', name: \"Sainsbury's Chicken Gravy Granules 200g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Cooking Sauces', tags: ['gravy','roast'], diet: ['vegetarian'], price: 1.30, nectarPrice: 1.20, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'cereal-500g', name: \"Sainsbury's Cornflakes 500g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Breakfast', tags: ['cereal','breakfast'], diet: ['vegetarian'], price: 2.50, nectarPrice: 2.30, promo: null, valueBand: 'balanced', isInStock: true, nectarPointsBonus: 50 },\n  { productId: 'orange-juice-1l', name: \"Sainsbury's Orange Juice 1L\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Beverages', tags: ['juice','breakfast'], diet: ['vegan'], price: 1.80, nectarPrice: 1.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'eggs-6pk', name: \"Sainsbury's Free Range Eggs 6pk\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['eggs','breakfast'], diet: ['vegetarian'], price: 2.00, nectarPrice: 1.90, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'yogurt-500g', name: \"Sainsbury's Natural Yogurt 500g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['yogurt','dairy'], diet: ['vegetarian'], price: 1.50, nectarPrice: 1.30, promo: null, valueBand: 'value', isInStock: true, perishableDays: 7 },\n  { productId: 'tea-100bags', name: \"Sainsbury's English Breakfast Tea 100 Bags\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Beverages', tags: ['tea','hot drink'], diet: ['vegan'], price: 3.00, nectarPrice: 2.80, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'coffee-200g', name: \"Sainsbury's Ground Coffee 200g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Beverages', tags: ['coffee','hot drink'], diet: ['vegan'], price: 4.50, nectarPrice: 4.00, promo: null, valueBand: 'premium', isInStock: true },\n  { productId: 'chocolate-100g', name: \"Sainsbury's Milk Chocolate 100g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Confectionery', tags: ['chocolate','snack'], diet: ['vegetarian'], price: 0.90, nectarPrice: 0.85, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'crisps-150g', name: \"Sainsbury's Salted Crisps 150g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Snacks', tags: ['crisps','snack'], diet: ['vegan'], price: 1.20, nectarPrice: 1.10, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'soup-400ml', name: \"Sainsbury's Tomato Soup 400ml\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Canned', tags: ['soup','vegetarian'], diet: ['vegetarian'], price: 1.50, nectarPrice: 1.30, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'olive-oil-500ml', name: \"Sainsbury's Extra Virgin Olive Oil 500ml\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Cooking Oils', tags: ['olive','oil','premium'], diet: ['vegan'], price: 5.00, nectarPrice: 4.50, promo: null, valueBand: 'premium', isInStock: true },\n  { productId: 'tomatoes-6pk', name: \"Sainsbury's Vine Tomatoes 6 Pack\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Vegetables', tags: ['tomatoes','vegan'], diet: ['vegan'], price: 2.00, nectarPrice: 2.00, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'cucumber-1pk', name: \"Sainsbury's Cucumber 1pk\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Vegetables', tags: ['cucumber','vegan'], diet: ['vegan'], price: 0.85, nectarPrice: 0.80, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'bell-peppers-3pk', name: \"Sainsbury's Mixed Bell Peppers 3 Pack\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Vegetables', tags: ['peppers','vegan'], diet: ['vegan'], price: 2.50, nectarPrice: 2.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'spinach-200g', name: \"Sainsbury's Baby Spinach 200g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Vegetables', tags: ['spinach','vegan'], diet: ['vegan'], price: 1.50, nectarPrice: 1.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'almonds-200g', name: \"Sainsbury's Roasted Almonds 200g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Snacks', tags: ['nuts','vegan'], diet: ['vegan'], price: 3.50, nectarPrice: 3.00, promo: null, valueBand: 'premium', isInStock: true },\n  { productId: 'granola-500g', name: \"Sainsbury's Honey & Nut Granola 500g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Breakfast', tags: ['granola','breakfast'], diet: ['vegetarian'], price: 3.00, nectarPrice: 2.70, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'apple-1kg', name: \"Sainsbury's Apples 1kg\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Fruits', tags: ['apple','vegan'], diet: ['vegan'], price: 2.20, nectarPrice: 2.20, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'banana-1kg', name: \"Sainsbury's Bananas 1kg\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Fruits', tags: ['banana','vegan'], diet: ['vegan'], price: 1.80, nectarPrice: 1.80, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'strawberries-400g', name: \"Sainsbury's Strawberries 400g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Fruits', tags: ['strawberry','vegan'], diet: ['vegan'], price: 3.00, nectarPrice: 2.70, promo: null, valueBand: 'balanced', isInStock: true, perishableDays: 3 }\n];\n\n// Additional SKUs for demos and examples\nRawProducts.push(\n  { productId: 'toilet-tissue-9-roll', name: \"Sainsbury's Toilet Tissue 9 Roll\", brand: \"Sainsbury's\", category: 'Home', subCategory: 'Household', tags: ['tissue','household'], diet: [], price: 3.70, nectarPrice: 3.20, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'toilet-tissue-12-roll', name: \"Sainsbury's Toilet Tissue 12 Roll\", brand: \"Sainsbury's\", category: 'Home', subCategory: 'Household', tags: ['tissue','bulk'], diet: [], price: 6.50, nectarPrice: 5.80, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'sourdough-loaf', name: \"Sainsbury's Sourdough Loaf\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Bakery', tags: ['bread','fresh'], diet: ['vegan'], price: 2.50, nectarPrice: 2.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'sugar-500g', name: \"Sainsbury's Caster Sugar 500g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Baking', tags: ['sugar','baking'], diet: ['vegan'], price: 0.95, nectarPrice: 0.90, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'apple-slices-100g', name: \"Apple Slices 100g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Snacks', tags: ['kids','snack'], diet: ['vegan'], price: 0.90, nectarPrice: 0.85, promo: null, valueBand: 'value', isInStock: true, perishableDays: 2 },\n  { productId: 'cheese-sticks-50g', name: \"Cheese Sticks 50g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Snacks', tags: ['kids','snack','dairy'], diet: ['vegetarian'], price: 1.20, nectarPrice: 1.10, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'vegan-cheese-150g', name: \"Vegan Cheese 150g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy Alternatives', tags: ['vegan','cheese'], diet: ['vegan'], price: 2.20, nectarPrice: 2.00, promo: null, valueBand: 'balanced', isInStock: true },\n  \n  // Profile-specific products for enhanced nudges\n  { productId: 'milk-4l', name: \"Sainsbury's Semi-Skimmed Milk 4L\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['milk','dairy','family-size'], diet: ['vegetarian'], price: 2.10, nectarPrice: 2.10, promo: null, valueBand: 'value', isInStock: true, perishableDays: 5 },\n  { productId: 'milk-2l', name: \"Sainsbury's Semi-Skimmed Milk 2L\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['milk','dairy'], diet: ['vegetarian'], price: 1.25, nectarPrice: 1.25, promo: null, valueBand: 'value', isInStock: true, perishableDays: 5 },\n  { productId: 'bread-2for2', name: \"Sainsbury's White Bread Loaf\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Bakery', tags: ['bread','family'], diet: ['vegetarian'], price: 1.20, nectarPrice: 1.20, promo: { type: 'multi-buy', value: 0.60, threshold: 2, groupId: 'bread-2for2' }, valueBand: 'value', isInStock: true },\n  { productId: 'greek-yogurt-500g', name: \"Sainsbury's Greek Yogurt 500g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Dairy', tags: ['yogurt','protein','health'], diet: ['vegetarian'], price: 2.50, nectarPrice: 2.50, promo: null, valueBand: 'balanced', isInStock: true, perishableDays: 7 },\n  { productId: 'protein-granola-400g', name: \"High-Protein Granola 400g\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Breakfast', tags: ['granola','protein','fitness'], diet: ['vegetarian'], price: 2.50, nectarPrice: 2.50, promo: { type: 'intro-price', value: 0.50, threshold: 1 }, valueBand: 'balanced', isInStock: true },\n  { productId: 'energy-bar-regular', name: \"Regular Energy Bar\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Snacks', tags: ['energy-bar','snack'], diet: ['vegetarian'], price: 1.20, nectarPrice: 1.20, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'protein-bar-lowsugar', name: \"High-Protein Low-Sugar Bar\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Snacks', tags: ['protein-bar','low-sugar','fitness'], diet: ['vegetarian'], price: 1.20, nectarPrice: 1.20, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'ready-meal-curry', name: \"Ready Meal: Chicken Curry\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Ready Meals', tags: ['curry','convenience','ready-meal'], diet: [], price: 3.50, nectarPrice: 3.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'microwave-rice', name: \"Microwave Rice (90s)\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Rice', tags: ['rice','convenience','quick'], diet: ['vegan'], price: 0.95, nectarPrice: 0.95, promo: null, valueBand: 'value', isInStock: true },\n  { productId: 'wine-bottle', name: \"Sainsbury's House Wine\", brand: \"Sainsbury's\", category: 'Alcohol', subCategory: 'Wine', tags: ['wine','evening'], diet: ['vegan'], price: 5.50, nectarPrice: 5.50, promo: null, valueBand: 'balanced', isInStock: true },\n  { productId: 'deli-pizza', name: \"Deli Pizza\", brand: \"Sainsbury's\", category: 'Food', subCategory: 'Ready Meals', tags: ['pizza','convenience','deli'], diet: ['vegetarian'], price: 3.50, nectarPrice: 3.50, promo: null, valueBand: 'balanced', isInStock: true }\n);\n\n\n","export const ComplementsRaw: Record<string, string[]> = {\n  'pasta-500g': ['pasta-sauce-350g'],\n  'falafel-200g': ['houmous-200g','pitta-bread-6pk'],\n  'whole-chicken-1kg': ['potatoes-2kg','carrots-1kg','gravy-granules-200g'],\n  'granola-500g': ['milk-1l','yogurt-500g'],\n  'tea-100bags': ['milk-1l','sugar-500g'],\n  'bell-peppers-3pk': ['olive-oil-500ml','tomatoes-6pk','spinach-200g'],\n  'toilet-tissue-9-roll': ['toilet-tissue-12-roll']\n};\n\n\n","export const MissionsRaw: Record<string, string[]> = {\n  'sunday-roast': ['whole-chicken-1kg','potatoes-2kg','carrots-1kg','gravy-granules-200g'],\n  'breakfast-combo': ['cereal-500g','milk-1l','yogurt-500g','granola-500g']\n};\n\n\n","import { Product } from './types';\nimport { RawProducts } from './data/catalogue';\nimport { ComplementsRaw } from './data/complements';\nimport { MissionsRaw } from './data/missions';\n\nexport const Catalog: Record<string, Product> = Object.fromEntries(\n  RawProducts.map(p => {\n    const sku = p.productId;\n    const promo = p.promo\n      ? (p.promo.type === 'multi-buy'\n          ? { type: 'multibuy', value: p.promo.value, threshold: p.promo.threshold, groupId: p.promo.groupId }\n          : p.promo.type === 'discount'\n            ? { type: 'price_drop', value: p.promo.value, groupId: p.promo.groupId }\n            : undefined)\n      : (p.nectarPrice && p.nectarPrice < p.price ? { type: 'nectar', nectarPrice: p.nectarPrice, isInStock: p.isInStock } : undefined);\n    const product: Product = {\n      sku,\n      name: p.name,\n      brand: p.brand,\n      price: p.price,\n      dietTags: (p.diet || []) as any,\n      categories: [p.category.toLowerCase(), p.subCategory.toLowerCase()],\n      tags: (p.tags || []) as any,\n      promo,\n      missionTags: [],\n      perishableDays: (p as any).perishableDays,\n      nectarPointsBonus: (p as any).nectarPointsBonus\n    };\n    return [sku, product];\n  })\n);\n\n// Back-compat test aliases for earlier tests\nif (Catalog['pasta-500g']) Catalog['pasta-penne'] = Catalog['pasta-500g'];\nif (Catalog['pasta-sauce-350g']) Catalog['pasta-sauce'] = Catalog['pasta-sauce-350g'];\nif (Catalog['falafel-200g']) Catalog['falafel'] = Catalog['falafel-200g'];\nif (Catalog['houmous-200g']) Catalog['houmous'] = Catalog['houmous-200g'];\nif (Catalog['carrots-1kg']) Catalog['carrots'] = Catalog['carrots-1kg'];\nif (Catalog['gravy-granules-200g']) Catalog['gravy'] = Catalog['gravy-granules-200g'];\nif (Catalog['whole-chicken-1kg']) Catalog['chicken-breast'] = Catalog['whole-chicken-1kg'];\n\nexport const Complements: Record<string, string[]> = ComplementsRaw;\nexport const MissionRecipes: Record<string, string[]> = MissionsRaw;\n\n// Back-compat complement aliases\nif (Complements['pasta-500g']) Complements['pasta-penne'] = Complements['pasta-500g'];\nif (Complements['houmous-200g']) Complements['houmous'] = Complements['houmous-200g'];\nif (Complements['falafel-200g']) Complements['falafel'] = Complements['falafel-200g'];\nif (Complements['gravy-granules-200g']) Complements['gravy'] = Complements['gravy-granules-200g'];\nif (Complements['carrots-1kg']) Complements['carrots'] = Complements['carrots-1kg'];\nif (Complements['whole-chicken-1kg']) Complements['chicken-breast'] = Complements['whole-chicken-1kg'];\n\n\n","import { BasketItem, Product } from './types';\nimport { Catalog } from './catalog';\n\nexport class BasketAnalyzer {\n  getBasketProducts(basket: BasketItem[]): Product[] {\n    return basket.flatMap(item => Array.from({ length: item.qty }, () => Catalog[item.sku])).filter(Boolean);\n  }\n\n  countByGroup(basket: BasketItem[], groupId: string): number {\n    const products = this.getBasketProducts(basket);\n    return products.filter(p => p.promo?.groupId === groupId).length;\n  }\n\n  computeMultibuySavingsIfOneAway(basket: BasketItem[]): { groupId: string; needed: number; potentialSaving: number }[] {\n    const products = this.getBasketProducts(basket);\n    const groups = new Map<string, { count: number; threshold: number; groupPriceSample: number[]; dealPrice: number }>();\n    for (const p of products) {\n      if (p.promo?.type === 'multibuy' && p.promo.groupId) {\n        const threshold = p.promo.threshold || 2;\n        const g = groups.get(p.promo.groupId) || { count: 0, threshold, groupPriceSample: [], dealPrice: p.promo.value || 0 };\n        g.count += 1;\n        g.groupPriceSample.push(p.price);\n        // prefer smallest deal price across items if varies\n        if (p.promo.value && (g.dealPrice === 0 || (p.promo.value < g.dealPrice))) g.dealPrice = p.promo.value;\n        groups.set(p.promo.groupId, g);\n      }\n    }\n    const results: { groupId: string; needed: number; potentialSaving: number }[] = [];\n    for (const [groupId, g] of groups) {\n      const remainder = g.count % g.threshold;\n      const needed = remainder === 0 ? 0 : g.threshold - remainder;\n      if (needed === 1) {\n        const sample = g.groupPriceSample.length > 0 ? g.groupPriceSample : [0];\n        const avgPrice = sample.reduce((a, b) => a + b, 0) / sample.length;\n        const regularTotal = g.threshold * avgPrice;\n        const dealTotal = g.dealPrice > 0 && g.dealPrice < regularTotal ? g.dealPrice : regularTotal;\n        const saving = Math.max(0, regularTotal - dealTotal);\n        results.push({ groupId, needed, potentialSaving: Number(saving.toFixed(2)) });\n      }\n    }\n    return results;\n  }\n}\n\n\n","import { nanoid } from 'nanoid';\nimport { BasketItem, NudgeCandidate, Product, SessionContext, UserProfile } from './types';\nimport { Catalog, Complements, MissionRecipes } from './catalog';\nimport { BasketAnalyzer } from './basketAnalyzer';\n\nexport class CandidateGenerator {\n  private basketAnalyzer = new BasketAnalyzer();\n\n  generateCandidates(session: SessionContext, profile: UserProfile): NudgeCandidate[] {\n    const lastScan = session.scans[session.scans.length - 1];\n    const candidates: NudgeCandidate[] = [];\n    if (lastScan) {\n      candidates.push(...this.generateComplement(lastScan.sku, profile));\n      candidates.push(...this.generateSubstitute(lastScan.sku, profile));\n      candidates.push(...this.generateTradeUp(lastScan.sku, profile));\n    }\n    candidates.push(...this.generateMultibuy(session.basket));\n    candidates.push(...this.generateMission(session.basket, profile));\n    candidates.push(...this.generateHoldOff(session.basket, profile));\n    candidates.push(...this.generateStockUp(session.basket, profile));\n    candidates.push(...this.generateStoreSpecific(session, profile));\n    candidates.push(...this.generateNectarPoints(session, profile));\n    return candidates;\n  }\n\n  private dietaryOk(product: Product, profile: UserProfile): boolean {\n    const dietOk = profile.dietTags.every(tag => product.dietTags.includes(tag));\n    const brandOk = !profile.avoidBrands.includes(product.brand);\n    const allergyOk = (profile.allergyProfile || []).every(a => !(product.tags || []).includes(a));\n    return dietOk && brandOk && allergyOk;\n  }\n\n  private generateComplement(sku: string, profile: UserProfile): NudgeCandidate[] {\n    const complementSkus = Complements[sku] || [];\n    const products = complementSkus.map(s => Catalog[s]).filter(Boolean).filter(p => this.dietaryOk(p, profile));\n    if (products.length === 0) return [];\n    const title = 'Complete your meal';\n    const reason = 'Goes well with what you just scanned';\n    const savings = products.reduce((acc, p) => acc + (p.promo?.type === 'nectar' && p.promo.nectarPrice ? p.price - p.promo.nectarPrice : 0), 0);\n    return [{ id: nanoid(), type: 'complement', title, reason, products, savings }];\n  }\n\n  private generateMultibuy(basket: BasketItem[]): NudgeCandidate[] {\n    const oneAway = this.basketAnalyzer.computeMultibuySavingsIfOneAway(basket);\n    const candidates: NudgeCandidate[] = [];\n    for (const g of oneAway) {\n      // find a representative product from the group to suggest\n      const product = Object.values(Catalog).find(p => p.promo?.groupId === g.groupId);\n      if (!product) continue;\n      candidates.push({\n        id: nanoid(),\n        type: 'multibuy',\n        title: 'You\\'re one away from a multibuy',\n        reason: `Add 1 more to save ¬£${g.potentialSaving.toFixed(2)}`,\n        products: [product],\n        savings: g.potentialSaving\n      });\n    }\n    return candidates;\n  }\n\n  private generateSubstitute(sku: string, profile: UserProfile): NudgeCandidate[] {\n    const product = Catalog[sku];\n    if (!product) return [];\n    const substitutes = Object.values(Catalog).filter(p => p.categories.some(c => product.categories.includes(c)) && p.sku !== product.sku);\n    const options: Product[] = [];\n    for (const s of substitutes) {\n      if (!this.dietaryOk(s, profile)) continue;\n      if (profile.valueBias === 'value') {\n        if (s.promo?.type === 'nectar' && s.promo.nectarPrice && s.promo.nectarPrice < product.price) options.push(s);\n        else if ((s.promo?.valueBand === 'low' || s.price < product.price) && s.price <= product.price * 0.9) options.push(s);\n      } else if (profile.valueBias === 'premium') {\n        if (s.price > product.price && s.brand !== 'Sainsbury\\'s Basics') options.push(s);\n      } else {\n        if (s.price <= product.price || (s.promo?.type === 'nectar' && s.promo.nectarPrice && s.promo.nectarPrice < product.price)) options.push(s);\n      }\n    }\n    if (options.length === 0) return [];\n    const best = options.sort((a, b) => (a.promo?.nectarPrice ?? a.price) - (b.promo?.nectarPrice ?? b.price))[0];\n    const saving = Math.max(0, product.price - (best.promo?.nectarPrice ?? best.price));\n    return [{ id: nanoid(), type: 'substitute', title: 'Better value available', reason: 'Swap to save', products: [best], savings: saving }];\n  }\n\n  private generateMission(basket: BasketItem[], profile: UserProfile): NudgeCandidate[] {\n    const basketSkus = new Set(basket.map(b => b.sku));\n    const candidates: NudgeCandidate[] = [];\n    for (const [mission, skus] of Object.entries(MissionRecipes)) {\n      const missing = skus.filter(s => !basketSkus.has(s))\n        .map(s => Catalog[s])\n        .filter(Boolean)\n        .filter(p => this.dietaryOk(p, profile));\n      if (missing.length > 0 && missing.length < skus.length) {\n        const savings = missing.reduce((acc, p) => acc + (p.promo?.type === 'nectar' && p.promo.nectarPrice ? p.price - p.promo.nectarPrice : 0), 0);\n        candidates.push({ id: nanoid(), type: 'mission', title: 'Finish your recipe', reason: `Complete ${mission.replace('_', ' ')}` , products: missing.slice(0, 3), savings });\n      }\n    }\n    return candidates;\n  }\n\n  // Store/time-based suggestions (simple demo rule)\n  private generateStoreSpecific(session: SessionContext, profile: UserProfile): NudgeCandidate[] {\n    if (!session.timeOfDay) return [];\n    const hour = Number(session.timeOfDay.split(':')[0] || 0);\n    // morning: breakfast complements\n    if (hour >= 7 && hour <= 10) {\n      const items: Product[] = [];\n      ['cereal-500g','milk-1l','orange-juice-1l'].forEach(s => { if (Catalog[s]) items.push(Catalog[s]); });\n      if (items.length) return [{ id: nanoid(), type: 'store', title: 'Morning specials', reason: 'Breakfast picks for now', products: items.slice(0, 3), savings: 0 }];\n    }\n    return [];\n  }\n\n  private generateTradeUp(sku: string, profile: UserProfile): NudgeCandidate[] {\n    const base = Catalog[sku];\n    if (!base) return [];\n    // premium alternative in same category\n    const premium = Object.values(Catalog).filter(p => p.categories.some(c => base.categories.includes(c)) && p.price > base.price && p.brand.includes('Taste the Difference'));\n    if (premium.length === 0) return [];\n    const best = premium.sort((a, b) => b.price - a.price)[0];\n    if (!this.dietaryOk(best, profile)) return [];\n    const title = 'Upgrade for your occasion';\n    const reason = `Try premium ${best.name}`;\n    return [{ id: nanoid(), type: 'tradeup', title, reason, products: [best], savings: 0 }];\n  }\n\n  private generateStockUp(basket: BasketItem[], profile: UserProfile): NudgeCandidate[] {\n    const items = new Map<string, number>();\n    for (const it of basket) items.set(it.sku, (items.get(it.sku) || 0) + it.qty);\n    const candidates: NudgeCandidate[] = [];\n    // Simple rule: if tissue 9-roll in basket, suggest 12-roll bulk\n    if (items.has('toilet-tissue-9-roll') && Catalog['toilet-tissue-12-roll']) {\n      const bulk = Catalog['toilet-tissue-12-roll'];\n      candidates.push({ id: nanoid(), type: 'stockup', title: 'Stock up and save', reason: 'Bigger pack for the week', products: [bulk], savings: 0 });\n    }\n    return candidates;\n  }\n\n  private generateNectarPoints(session: SessionContext, profile: UserProfile): NudgeCandidate[] {\n    if (!(profile.valueBias === 'value' || profile.valueBias === 'balanced')) return [];\n    const basketSkus = new Set(session.basket.map(b => b.sku));\n    const options = Object.values(Catalog).filter(p => (p.nectarPointsBonus || 0) > 0 && !basketSkus.has(p.sku));\n    if (options.length === 0) return [];\n    // choose highest points\n    const best = options.sort((a, b) => (b.nectarPointsBonus || 0) - (a.nectarPointsBonus || 0))[0];\n    if (!this.dietaryOk(best, profile)) return [];\n    return [{ id: nanoid(), type: 'nectar_points', title: 'Earn bonus Nectar points', reason: `Get ${best.nectarPointsBonus} extra points`, products: [best], savings: 0 }];\n  }\n\n  // Hold-off nudge: if user is adding more short-shelf-life items and basket already has enough\n  private generateHoldOff(basket: BasketItem[], profile: UserProfile): NudgeCandidate[] {\n    const products = basket.map(b => ({ item: b, product: Catalog[b.sku] })).filter(p => p.product);\n    const perishables = products.filter(p => (p.product.perishableDays || 0) > 0);\n    if (perishables.length === 0) return [];\n    // Simple heuristic: if total perishable qty >= 3 and adding another perishable with <=3 days\n    const totalPerishables = perishables.reduce((acc, p) => acc + p.item.qty, 0);\n    const soonExpiring = perishables.some(p => (p.product.perishableDays || 99) <= 3);\n    if (totalPerishables >= 3 && soonExpiring) {\n      const prods = perishables.slice(0, 2).map(p => p.product);\n      return [{ id: nanoid(), type: 'holdoff', title: 'Heads up: perishables may expire', reason: 'Avoid overbuying items that expire soon', products: prods, savings: 0 }];\n    }\n    return [];\n  }\n}\n\n\n","import { NudgeCandidate, UserProfile } from './types';\n\nexport class NudgeRanker {\n  rank(candidates: NudgeCandidate[], profile: UserProfile): NudgeCandidate[] {\n    const scored = candidates.map(c => ({\n      ...c,\n      score: this.scoreCandidate(c, profile)\n    }));\n    return scored.sort((a, b) => (b.score ?? 0) - (a.score ?? 0));\n  }\n\n  private scoreCandidate(c: NudgeCandidate, profile: UserProfile): number {\n    let score = 0;\n    // Base by type relevance\n    if (c.type === 'complement') score += 7;\n    if (c.type === 'multibuy') score += 6;\n    if (c.type === 'substitute') score += 3;\n    if (c.type === 'mission') score += 2;\n    if (c.type === 'tradeup') score += 2;\n    if (c.type === 'stockup') score += 1;\n    if (c.type === 'nectar_points') score += (profile.valueBias === 'value' ? 4 : 2);\n\n    // Savings and points weight\n    score += Math.min(10, c.savings * 2);\n    const points = c.type === 'nectar_points' ? (c.products[0]?.nectarPointsBonus || 0) : 0;\n    if (points) score += Math.min(10, points / 10 * (profile.valueBias === 'value' ? 1.5 : 1));\n\n    // Value bias alignment\n    if (profile.valueBias === 'value' && (c.type === 'substitute' || c.type === 'multibuy')) score += 3;\n\n    // Diversity: fewer products preferred for simplicity\n    score -= Math.max(0, c.products.length - 2);\n\n    return score;\n  }\n}\n\n\n","import { SessionContext } from './types';\n\nexport class ThrottleManager {\n  private scansBetweenNudges: number;\n  constructor(scansBetweenNudges = 3) {\n    this.scansBetweenNudges = scansBetweenNudges;\n  }\n\n  canServeNudge(session: SessionContext): boolean {\n    const totalScans = session.scans.length;\n    if (session.lastNudgeScanIndex === undefined) return true;\n    return totalScans - session.lastNudgeScanIndex >= this.scansBetweenNudges;\n  }\n\n  hasSeenCandidate(session: SessionContext, candidateId: string): boolean {\n    return session.nudgeHistory.includes(candidateId);\n  }\n}\n\n\n","import { CandidateGenerator } from './candidateGenerator';\nimport { NudgeRanker } from './nudgeRanker';\nimport { SessionContext, UserProfile, ScanEvent, NudgeCandidate } from './types';\nimport { ThrottleManager } from './throttleManager';\n\nexport class NudgeEngine {\n  private generator = new CandidateGenerator();\n  private ranker = new NudgeRanker();\n  private throttle = new ThrottleManager(3);\n\n  processScan(session: SessionContext, profile: UserProfile, event: ScanEvent): NudgeCandidate | null {\n    session.scans.push(event);\n    const candidates = this.generator.generateCandidates(session, profile);\n    const ranked = this.ranker.rank(candidates, profile);\n    if (!this.throttle.canServeNudge(session)) return null;\n    for (const c of ranked) {\n      if (!this.throttle.hasSeenCandidate(session, c.id)) {\n        session.nudgeHistory.push(c.id);\n        session.lastNudgeScanIndex = session.scans.length;\n        return c;\n      }\n    }\n    return null;\n  }\n\n  async processScanAI(session: SessionContext, profile: UserProfile, event: ScanEvent): Promise<NudgeCandidate | null> {\n    session.scans.push(event);\n    const candidates = this.generator.generateCandidates(session, profile);\n    let ranked = this.ranker.rank(candidates, profile);\n    if (ranked.length > 0) {\n      try {\n        const resp = await fetch('http://localhost:8787/rerank', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ candidates: ranked, profile, session })\n        });\n        if (resp.ok) {\n          const data = await resp.json();\n          if (Array.isArray(data?.candidates) && data.candidates.length > 0) ranked = data.candidates;\n        }\n      } catch {\n        // fall back silently\n      }\n    }\n    if (!this.throttle.canServeNudge(session)) return null;\n    for (const c of ranked) {\n      if (!this.throttle.hasSeenCandidate(session, c.id)) {\n        session.nudgeHistory.push(c.id);\n        session.lastNudgeScanIndex = session.scans.length;\n        return c;\n      }\n    }\n    return null;\n  }\n}\n\n\n","import { NudgeEngine } from './nudgeEngine';\nimport { SessionContext, UserProfile } from './types';\n\nexport type ProfileType = 'budget-family' | 'health-fitness' | 'convenience-professional';\n\nexport interface EnhancedUserProfile extends UserProfile {\n  profileType: ProfileType;\n  displayName: string;\n  description: string;\n  traits: string[];\n}\n\nexport const USER_PROFILES: Record<ProfileType, EnhancedUserProfile> = {\n  'budget-family': {\n    id: 'budget-family-shopper',\n    profileType: 'budget-family',\n    displayName: 'Budget-conscious Family Shopper',\n    description: 'Weekly shop, large household, prefers multi-buy deals, price sensitive',\n    traits: ['Weekly shopping trips', 'Large household', 'Multi-buy deals', 'Price sensitive', 'Bulk purchases'],\n    dietTags: [],\n    avoidBrands: [],\n    valueBias: 'value',\n    budgetBand: 'low',\n    allergyProfile: []\n  },\n  'health-fitness': {\n    id: 'health-fitness-enthusiast',\n    profileType: 'health-fitness',\n    displayName: 'Health & Fitness Enthusiast',\n    description: 'Active lifestyle, prefers high-protein and low-sugar products, spends more on nutritional items',\n    traits: ['Active lifestyle', 'High-protein preference', 'Low-sugar focus', 'Nutrition conscious', 'Premium health products'],\n    dietTags: [],\n    avoidBrands: [],\n    valueBias: 'premium',\n    budgetBand: 'high',\n    allergyProfile: []\n  },\n  'convenience-professional': {\n    id: 'convenience-professional',\n    profileType: 'convenience-professional',\n    displayName: 'Convenience-driven Young Professional',\n    description: 'Small basket, frequent top-up shops, values ready-to-eat and quick-prep meals',\n    traits: ['Small basket size', 'Frequent shopping', 'Quick preparation', 'Ready-to-eat meals', 'Time-conscious'],\n    dietTags: [],\n    avoidBrands: [],\n    valueBias: 'balanced',\n    budgetBand: 'mid',\n    allergyProfile: []\n  }\n};\n\nexport interface NudgeScenario {\n  triggerProduct: string;\n  nudgeType: string;\n  title: string;\n  reason: string;\n  recommendedProducts: string[];\n  savings: number;\n  ctaText: {\n    primary: string;\n    secondary: string;\n  };\n  persuasiveCopy: {\n    headline: string;\n    subtext: string;\n    urgency?: string;\n  };\n}\n\nexport const PROFILE_SCENARIOS: Record<ProfileType, NudgeScenario[]> = {\n  'budget-family': [\n    {\n      triggerProduct: 'milk-2l',\n      nudgeType: 'family-optimizer',\n      title: 'üí∞ Family-Size Optimizer',\n      reason: 'Families like yours save ¬£0.40 by choosing the 4L option. Less shopping trips, more family time!',\n      recommendedProducts: ['milk-4l'],\n      savings: 0.40,\n      ctaText: { primary: 'Swap to 4L', secondary: 'Keep 2L' },\n      persuasiveCopy: {\n        headline: 'Smart families choose bigger',\n        subtext: 'Save money and reduce weekly shopping trips',\n        urgency: '40p savings - every penny counts!'\n      }\n    },\n    {\n      triggerProduct: 'bread-2for2',\n      nudgeType: 'multibuy-completion',\n      title: 'üéØ Complete Your Deal',\n      reason: 'Budget-conscious shoppers never miss a deal! Add another loaf to unlock 60p savings for your family.',\n      recommendedProducts: ['bread-2for2'],\n      savings: 0.60,\n      ctaText: { primary: 'Complete Deal', secondary: 'Just one loaf' },\n      persuasiveCopy: {\n        headline: 'You\\'re halfway to savings',\n        subtext: 'Complete the family deal and save 60p',\n        urgency: 'Multi-buy deals end today!'\n      }\n    }\n  ],\n  'health-fitness': [\n    {\n      triggerProduct: 'greek-yogurt-500g',\n      nudgeType: 'protein-complement',\n      title: 'üí™ Performance Pairing',\n      reason: 'Maximize your protein intake! This high-protein granola contains 25g protein per serving - perfect for your active lifestyle.',\n      recommendedProducts: ['protein-granola-400g'],\n      savings: 0.50,\n      ctaText: { primary: 'Power Up', secondary: 'Skip' },\n      persuasiveCopy: {\n        headline: 'Fuel your performance',\n        subtext: 'Complete protein breakfast = better workouts',\n        urgency: 'Intro price - serious athletes act fast!'\n      }\n    },\n    {\n      triggerProduct: 'energy-bar-regular',\n      nudgeType: 'better-fit-substitute',\n      title: 'üéØ Fitness Upgrade',\n      reason: 'Level up your nutrition! This bar has 40% more protein and 60% less sugar - perfect for your fitness goals.',\n      recommendedProducts: ['protein-bar-lowsugar'],\n      savings: 0,\n      ctaText: { primary: 'Upgrade Fuel', secondary: 'Keep current' },\n      persuasiveCopy: {\n        headline: 'Upgrade your fuel',\n        subtext: 'More protein, less sugar = better results',\n        urgency: 'Train smarter, not harder!'\n      }\n    }\n  ],\n  'convenience-professional': [\n    {\n      triggerProduct: 'ready-meal-curry',\n      nudgeType: 'meal-completion',\n      title: '‚ö° Instant Dinner Solution',\n      reason: 'Busy professionals deserve complete meals! Add this 90-second rice to avoid the hassle of cooking sides.',\n      recommendedProducts: ['microwave-rice'],\n      savings: 0,\n      ctaText: { primary: 'Complete Meal', secondary: 'Just curry' },\n      persuasiveCopy: {\n        headline: 'Dinner sorted in 90 seconds',\n        subtext: 'No prep, no cleanup, no stress',\n        urgency: 'Perfect for your busy schedule!'\n      }\n    },\n    {\n      triggerProduct: 'wine-bottle',\n      nudgeType: 'occasion-upgrade',\n      title: 'üçï Weekend Treat',\n      reason: 'You\\'ve earned this! Professionals who work hard deserve the perfect Friday night combo.',\n      recommendedProducts: ['deli-pizza'],\n      savings: 0,\n      ctaText: { primary: 'Treat Yourself', secondary: 'Just wine' },\n      persuasiveCopy: {\n        headline: 'Your night-in awaits',\n        subtext: 'Wine + pizza = weekend perfection',\n        urgency: 'You deserve this after a long week!'\n      }\n    }\n  ]\n};\n\nexport function createEnhancedDemo(profileType: ProfileType = 'budget-family') {\n  const engine = new NudgeEngine();\n  const session: SessionContext = { basket: [], scans: [], nudgeHistory: [] };\n  const user = USER_PROFILES[profileType];\n\n  return { engine, session, user, scenarios: PROFILE_SCENARIOS[profileType] };\n}","import { createEnhancedDemo, ProfileType, USER_PROFILES, PROFILE_SCENARIOS, NudgeScenario } from './enhancedDemo';\nimport { Catalog } from './catalog';\nimport { NudgeCandidate } from './types';\n\nexport function mountEnhancedUI(root: HTMLElement) {\n  let currentProfileType: ProfileType = 'budget-family';\n  let { engine, session, user, scenarios } = createEnhancedDemo(currentProfileType);\n  let useAI = true;\n\n  root.innerHTML = `\n    <div class=\"container\">\n      <div class=\"header\">\n        <div class=\"logo\"><span class=\"dot\"></span> SmartShop Nudges</div>\n        <div style=\"display:flex; align-items:center; gap:10px;\">\n          <span class=\"badge-agentic\"><span id=\"aiStatusDot\" class=\"status-dot status-offline\"></span>Agentic: Gemini Re-ranker</span>\n          <label style=\"font-size:12px; color:var(--muted)\">Enable\n            <input id=\"aiToggle\" type=\"checkbox\" ${useAI ? 'checked' : ''} />\n          </label>\n          <div class=\"scan-meta\">Throttling: 1 per 3 scans</div>\n        </div>\n      </div>\n      \n      <!-- Profile Selector -->\n      <div class=\"profile-selector\" id=\"profile-selector\"></div>\n      <div class=\"profile-info\" id=\"profile-info\"></div>\n      \n      <div class=\"layout\">\n        <div>\n          <div class=\"nudge-activity\">\n            <div style=\"font-weight:700; margin-bottom:8px;\">Nudge Activity</div>\n            <div id=\"nudge-activity-log\" style=\"font-size:12px; color:var(--muted)\">No nudges yet</div>\n          </div>\n          <div class=\"basket\" id=\"basket\">\n            <div style=\"font-weight:700; margin-bottom:8px;\">Products to Try</div>\n            <div id=\"nudge-trigger-guide\" style=\"font-size:12px; margin-bottom:12px;\"></div>\n            <div style=\"font-weight:700; margin-bottom:8px;\">Your Basket</div>\n            <div id=\"basket-items\" style=\"font-size:14px; color:var(--muted)\">Empty - Select products above to discover smart nudges</div>\n          </div>\n        </div>\n        <div class=\"phone\">\n          <div class=\"phone-notch\"></div>\n          <div class=\"phone-screen\">\n            <div class=\"phone-content\" id=\"phone-content\">\n              <div class=\"mobile-header\">\n                <div class=\"mobile-app-name\">SmartShop</div>\n                <div class=\"mobile-tagline\">Smart shopping made simple</div>\n              </div>\n              \n              <div class=\"mobile-products\">\n                <div class=\"mobile-products-title\">\n                  üõçÔ∏è Shop Products\n                  <span style=\"font-size:10px; color:var(--muted); margin-left:auto;\" id=\"product-count\">0 products</span>\n                </div>\n                <div class=\"mobile-products-grid\" id=\"mobile-products-grid\"></div>\n              </div>\n              \n              <div class=\"phone-card\">\n                <h3>Basket</h3>\n                <div id=\"phone-basket\"></div>\n                <div class=\"basket-total\"><span>Total</span><span id=\"phone-total\">¬£0.00</span></div>\n                <button id=\"checkout-btn\" class=\"checkout-btn\" style=\"display:none;\">Proceed to Checkout</button>\n              </div>\n            </div>\n            <div id=\"nudge\" class=\"nudge-sheet\" aria-live=\"polite\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n\n  // Get DOM elements\n  const profileSelector = document.getElementById('profile-selector')!;\n  const profileInfo = document.getElementById('profile-info')!;\n  const mobileProductsGrid = document.getElementById('mobile-products-grid')!;\n  const productCount = document.getElementById('product-count')!;\n  const nudgeContainer = document.getElementById('nudge')!;\n  const basketEl = document.getElementById('basket-items')!;\n  const aiToggle = document.getElementById('aiToggle') as HTMLInputElement;\n  const phoneBasket = document.getElementById('phone-basket')!;\n  const phoneTotal = document.getElementById('phone-total')!;\n  const nudgeTriggerGuide = document.getElementById('nudge-trigger-guide')!;\n  const activityLog = document.getElementById('nudge-activity-log')!;\n  const aiStatusDot = document.getElementById('aiStatusDot') as HTMLSpanElement;\n  const checkoutBtn = document.getElementById('checkout-btn')! as HTMLButtonElement;\n\n  aiToggle?.addEventListener('change', () => { useAI = !!aiToggle.checked; });\n  checkoutBtn?.addEventListener('click', () => showCheckoutSummary());\n\n  // Create profile selector buttons\n  function renderProfileSelector() {\n    profileSelector.innerHTML = '';\n    Object.entries(USER_PROFILES).forEach(([key, profile]) => {\n      const btn = document.createElement('button');\n      btn.className = `profile-btn ${key === currentProfileType ? 'active' : ''}`;\n      btn.textContent = profile.displayName;\n      btn.onclick = () => switchProfile(key as ProfileType);\n      profileSelector.appendChild(btn);\n    });\n  }\n\n  // Render profile info\n  function renderProfileInfo() {\n    const profile = USER_PROFILES[currentProfileType];\n    profileInfo.innerHTML = `\n      <div class=\"profile-name\">${profile.displayName}</div>\n      <div class=\"profile-description\">${profile.description}</div>\n      <div class=\"profile-traits\">\n        ${profile.traits.map(trait => `<span class=\"trait-tag\">${trait}</span>`).join('')}\n      </div>\n    `;\n  }\n\n  // Render nudge trigger guide\n  function renderNudgeTriggerGuide() {\n    const profile = USER_PROFILES[currentProfileType];\n    const profileEmojis: Record<string, string> = {\n      'budget-family': 'üí∞',\n      'health-fitness': 'üí™',\n      'convenience-professional': '‚ö°'\n    };\n    \n    const triggers = scenarios.map(scenario => {\n      const triggerProduct = Catalog[scenario.triggerProduct];\n      if (!triggerProduct) return '';\n      \n      return `<div style=\"margin-bottom:8px; padding:8px 10px; background:rgba(255,121,0,0.08); border-radius:10px; border:1px solid rgba(255,121,0,0.15); cursor:pointer;\" onclick=\"document.querySelector('[data-product=\\\\\"${scenario.triggerProduct}\\\\\"]')?.click()\">\n        <div style=\"font-weight:700; color:var(--brand-navy); font-size:12px; margin-bottom:2px;\">üì± ${triggerProduct.name} <span style=\"color:var(--brand-orange); font-size:9px;\">(Top of mobile)</span></div>\n        <div style=\"color:var(--brand-orange); font-size:10px; font-weight:600; text-transform:uppercase;\">${scenario.title}</div>\n        <div style=\"color:var(--muted); font-size:10px; margin-top:2px;\">${scenario.persuasiveCopy.headline}</div>\n      </div>`;\n    }).filter(item => item !== '').join('');\n\n    const profileEmoji = profileEmojis[currentProfileType] || 'üõí';\n    nudgeTriggerGuide.innerHTML = triggers ? \n      `<div style=\"font-weight:700; color:var(--brand-navy); margin-bottom:10px; font-size:12px;\">${profileEmoji} ${profile.displayName} - Try these products:</div>${triggers}` : \n      '';\n  }\n\n  // Switch profile\n  function switchProfile(profileType: ProfileType) {\n    currentProfileType = profileType;\n    const newDemo = createEnhancedDemo(profileType);\n    engine = newDemo.engine;\n    session = newDemo.session;\n    user = newDemo.user;\n    scenarios = newDemo.scenarios;\n    \n    renderProfileSelector();\n    renderProfileInfo();\n    renderNudgeTriggerGuide();\n    renderBasket();\n    renderMobileProducts();\n    \n    // Clear activity log\n    activityLog.textContent = 'No nudges yet';\n    // Hide any open nudges\n    nudgeContainer.classList.remove('open');\n    nudgeContainer.innerHTML = '';\n  }\n\n  // Render basket\n  function renderBasket() {\n    if (session.basket.length === 0) { \n      basketEl.textContent = 'Empty - Select products above to discover smart nudges'; \n      phoneBasket.innerHTML = '<div class=\"empty-basket\">Your basket is empty</div>';\n      phoneTotal.textContent = '¬£0.00';\n      checkoutBtn.style.display = 'none';\n      return; \n    }\n    \n    basketEl.innerHTML = '';\n    phoneBasket.innerHTML = '';\n    let total = 0;\n    \n    for (const item of session.basket) {\n      const p = Catalog[item.sku];\n      if (!p) continue;\n      \n      const row = document.createElement('div');\n      row.textContent = `${p.name} √ó ${item.qty}`;\n      basketEl.appendChild(row);\n\n      const prow = document.createElement('div');\n      prow.className = 'basket-row';\n      prow.innerHTML = `<span>${p.name}</span><span class=\"qty-badge\">√ó ${item.qty}</span>`;\n      phoneBasket.appendChild(prow);\n      total += p.price * item.qty;\n    }\n    phoneTotal.textContent = `¬£${total.toFixed(2)}`;\n    checkoutBtn.style.display = 'block';\n  }\n\n  // Render mobile products - prioritize trigger products first\n  function renderMobileProducts() {\n    mobileProductsGrid.innerHTML = '';\n    \n    // Get trigger products for current profile (these go first)\n    const triggerSkus = scenarios.map(s => s.triggerProduct);\n    const triggerProducts = triggerSkus\n      .map(sku => Catalog[sku])\n      .filter(p => p); // Remove any undefined products\n    \n    // Get remaining products (excluding triggers) - reduced count for better nudge visibility\n    const remainingProducts = Object.values(Catalog)\n      .filter(p => !triggerSkus.includes(p.sku))\n      .slice(0, 8); // Reduced to 8 to make nudges more visible\n    \n    // Combine: trigger products first, then others (total ~10 products)\n    const allProducts = [...triggerProducts, ...remainingProducts];\n    \n    productCount.textContent = `${allProducts.length} products`;\n    \n    for (let i = 0; i < allProducts.length; i++) {\n      const p = allProducts[i];\n      const card = document.createElement('div');\n      card.className = 'mobile-product-card';\n      card.setAttribute('data-product', p.sku);\n      \n      // Add subtle visual hint for trigger products (first few items)\n      const isTriggerProduct = triggerSkus.includes(p.sku);\n      if (isTriggerProduct) {\n        card.style.boxShadow = '0 2px 8px rgba(255, 121, 0, 0.08)';\n        card.style.borderColor = 'rgba(255, 121, 0, 0.2)';\n      }\n      \n      card.innerHTML = `\n        <div class=\"mobile-product-name\">${p.name}</div>\n        <div class=\"mobile-product-price\">¬£${p.price.toFixed(2)}</div>\n      `;\n      \n      card.onclick = () => handleScan(p.sku);\n      mobileProductsGrid.appendChild(card);\n    }\n  }\n\n  // Handle product scan (now shows nudge without auto-adding to basket)\n  function handleScan(sku: string) {\n    // Check for matching scenarios first (show nudge without adding to basket)\n    const matchingScenario = scenarios.find(s => s.triggerProduct === sku);\n    if (matchingScenario) {\n      const customNudge = createCustomNudge(matchingScenario);\n      showEnhancedNudge(customNudge, matchingScenario, sku);\n      return;\n    }\n\n    // For non-scenario products, add to basket directly\n    const existing = session.basket.find(b => b.sku === sku);\n    if (existing) existing.qty += 1;\n    else session.basket.push({ sku, qty: 1 });\n    renderBasket();\n\n    // Fall back to regular engine for other nudges\n    if (useAI) {\n      engine.processScanAI(session, user, { sku, timestamp: Date.now() })\n        .then(nudge => { if (nudge) showNudge(nudge); });\n    } else {\n      const nudge = engine.processScan(session, user, { sku, timestamp: Date.now() });\n      if (nudge) showNudge(nudge);\n    }\n  }\n\n  // Create custom nudge from scenario\n  function createCustomNudge(scenario: NudgeScenario): NudgeCandidate {\n    const products = scenario.recommendedProducts\n      .map(sku => Catalog[sku])\n      .filter(p => p);\n\n    return {\n      id: `custom-${scenario.nudgeType}-${Date.now()}`,\n      type: scenario.nudgeType as any,\n      title: scenario.title,\n      reason: scenario.reason,\n      products: products,\n      savings: scenario.savings,\n      score: 1.0\n    };\n  }\n\n  // Show enhanced nudge with persuasive copy\n  function showEnhancedNudge(nudge: NudgeCandidate, scenario: NudgeScenario, triggerSku?: string) {\n    updateActivityLog(nudge);\n\n    const savingsText = nudge.savings > 0 ? `Save ¬£${nudge.savings.toFixed(2)}` : '';\n    const typeEmoji = getTypeEmoji(scenario.nudgeType);\n    \n    nudgeContainer.setAttribute('role', 'dialog');\n    nudgeContainer.setAttribute('aria-label', `${nudge.title}. ${nudge.reason}. ${savingsText}`);\n    \n    nudgeContainer.innerHTML = `\n      <div class=\"nudge-header\">\n        <div class=\"nudge-type-indicator\">${typeEmoji}</div>\n        <div class=\"nudge-headline\">${scenario.persuasiveCopy.headline}</div>\n        <div class=\"nudge-title\">${scenario.title}</div>\n        <div class=\"nudge-subtext\">${scenario.persuasiveCopy.subtext}</div>\n        ${scenario.persuasiveCopy.urgency ? `<div class=\"nudge-urgency\">${scenario.persuasiveCopy.urgency}</div>` : ''}\n      </div>\n      <div class=\"nudge-reason\">${nudge.reason}</div>\n      <div class=\"nudge-products\">\n        ${nudge.products.map(p => `<span class=\"tag\">${p.name} - ¬£${p.price.toFixed(2)}</span>`).join('')}\n      </div>\n      <div class=\"cta-row\">\n        ${savingsText ? `<span class=\"badge-save\">${savingsText}</span>` : ''}\n        <button id=\"addBtn\" class=\"btn-primary\">${scenario.ctaText.primary}</button>\n        <button id=\"dismissBtn\" class=\"btn-secondary\">${scenario.ctaText.secondary}</button>\n      </div>\n    `;\n    \n    nudgeContainer.classList.add('open');\n    setupNudgeButtons(nudge, triggerSku);\n  }\n\n  // Regular nudge display (fallback)\n  function showNudge(nudge: NudgeCandidate) {\n    updateActivityLog(nudge);\n\n    const savingsText = `Save ¬£${nudge.savings.toFixed(2)}`;\n    nudgeContainer.setAttribute('role', 'dialog');\n    nudgeContainer.setAttribute('aria-label', `${nudge.title}. ${nudge.reason}. ${savingsText}`);\n    \n    nudgeContainer.innerHTML = `\n      <div class=\"nudge-header\">\n        <div class=\"nudge-title\">${nudge.title}</div>\n      </div>\n      <div class=\"nudge-reason\">${nudge.reason}</div>\n      <div class=\"nudge-products\">\n        ${nudge.products.map(p => `<span class=\"tag\">${p.name}</span>`).join('')}\n      </div>\n      <div class=\"cta-row\">\n        <span class=\"badge-save\">${savingsText}</span>\n        <button id=\"addBtn\" class=\"btn-primary\">Add</button>\n        <button id=\"dismissBtn\" class=\"btn-secondary\">Dismiss</button>\n      </div>\n    `;\n    \n    nudgeContainer.classList.add('open');\n    setupNudgeButtons(nudge);\n  }\n\n  // Setup nudge button handlers\n  function setupNudgeButtons(nudge: NudgeCandidate, triggerSku?: string) {\n    const addBtn = document.getElementById('addBtn')!;\n    const dismissBtn = document.getElementById('dismissBtn')!;\n    \n    addBtn.onclick = () => {\n      // Add trigger product if provided\n      if (triggerSku) {\n        const existing = session.basket.find(b => b.sku === triggerSku);\n        if (existing) existing.qty += 1;\n        else session.basket.push({ sku: triggerSku, qty: 1 });\n      }\n      \n      // Add recommended products\n      for (const p of nudge.products) {\n        const existing = session.basket.find(b => b.sku === p.sku);\n        if (existing) existing.qty += 1;\n        else session.basket.push({ sku: p.sku, qty: 1 });\n      }\n      renderBasket();\n      nudgeContainer.classList.remove('open');\n      nudgeContainer.innerHTML = '';\n    };\n    \n    dismissBtn.onclick = () => {\n      // For dismiss, only add trigger product if it's a substitute scenario (where user keeps current)\n      if (triggerSku) {\n        const matchingScenario = scenarios.find(s => s.triggerProduct === triggerSku);\n        const isSubstituteScenario = matchingScenario?.nudgeType === 'better-fit-substitute';\n        \n        if (isSubstituteScenario) {\n          // For substitutes, add the original trigger product they wanted to keep\n          const existing = session.basket.find(b => b.sku === triggerSku);\n          if (existing) existing.qty += 1;\n          else session.basket.push({ sku: triggerSku, qty: 1 });\n          renderBasket();\n        }\n        // For other scenarios (complements, deals), dismissing means no products are added\n      }\n      \n      nudgeContainer.classList.remove('open');\n      nudgeContainer.innerHTML = '';\n    };\n  }\n\n  // Update activity log\n  function updateActivityLog(nudge: NudgeCandidate) {\n    if (activityLog) {\n      const typeToClass: Record<string, string> = {\n        'family-optimizer': 'pill-stockup',\n        'multibuy-completion': 'pill-multibuy',\n        'protein-complement': 'pill-complement',\n        'better-fit-substitute': 'pill-substitute',\n        'meal-completion': 'pill-complement',\n        'occasion-upgrade': 'pill-tradeup',\n        complement: 'pill-complement',\n        multibuy: 'pill-multibuy',\n        substitute: 'pill-substitute',\n        mission: 'pill-mission',\n        tradeup: 'pill-tradeup',\n        stockup: 'pill-stockup',\n        holdoff: 'pill-holdoff'\n      };\n      \n      const pillClass = typeToClass[nudge.type] || 'pill-complement';\n      const row = document.createElement('div');\n      row.style.marginBottom = '6px';\n      row.innerHTML = `<span class=\"pill ${pillClass}\">${nudge.type}</span> <span style=\"color:var(--brand-navy); font-weight:600;\">${nudge.title}</span> <span style=\"color:var(--muted)\">‚Äî ${nudge.reason}</span>`;\n      \n      if (activityLog.textContent === 'No nudges yet') {\n        activityLog.textContent = '';\n        // Dim the trigger guide since nudges are now happening\n        if (nudgeTriggerGuide) {\n          nudgeTriggerGuide.style.opacity = '0.6';\n        }\n      }\n      activityLog.prepend(row);\n    }\n  }\n\n  // Get emoji for nudge type\n  function getTypeEmoji(type: string): string {\n    const typeEmojis: Record<string, string> = {\n      'family-optimizer': 'üí∞',\n      'multibuy-completion': 'üéØ',\n      'protein-complement': 'üí™',\n      'better-fit-substitute': 'üéØ',\n      'meal-completion': '‚ö°',\n      'occasion-upgrade': 'üçï'\n    };\n    return typeEmojis[type] || 'üõí';\n  }\n\n  // Show checkout summary with savings and benefits\n  function showCheckoutSummary() {\n    const profile = USER_PROFILES[currentProfileType];\n    let totalSavings = 0;\n    let smartChoices = 0;\n    let benefits: string[] = [];\n\n    // Calculate savings from accepted nudges (this is a simplified calculation)\n    const nudgeInteractions = activityLog.children.length;\n    \n    // Estimate savings based on profile scenarios\n    for (const item of session.basket) {\n      const matchingScenario = scenarios.find(s => \n        s.triggerProduct === item.sku || s.recommendedProducts.includes(item.sku)\n      );\n      if (matchingScenario) {\n        totalSavings += matchingScenario.savings * item.qty;\n        smartChoices++;\n      }\n    }\n\n    // Profile-specific benefits\n    if (currentProfileType === 'budget-family') {\n      benefits = [\n        `üí∞ Saved ¬£${totalSavings.toFixed(2)} with family-size deals`,\n        `üè† Reduced shopping trips with bulk purchases`,\n        `üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Smart choices for your family budget`\n      ];\n    } else if (currentProfileType === 'health-fitness') {\n      benefits = [\n        `üí™ Optimized protein intake for better performance`,\n        `üéØ Made ${smartChoices} fitness-focused choices`,\n        `‚ö° Fueled your active lifestyle smartly`\n      ];\n    } else if (currentProfileType === 'convenience-professional') {\n      benefits = [\n        `‚è∞ Saved time with complete meal solutions`,\n        `üéØ Made ${smartChoices} convenience-focused choices`,\n        `üèÜ Treated yourself after a productive week`\n      ];\n    }\n\n    let total = 0;\n    for (const item of session.basket) {\n      const p = Catalog[item.sku];\n      if (p) total += p.price * item.qty;\n    }\n\n    const profileEmojis: Record<string, string> = {\n      'budget-family': 'üí∞',\n      'health-fitness': 'üí™',\n      'convenience-professional': '‚ö°'\n    };\n\n    const profileEmoji = profileEmojis[currentProfileType];\n\n    nudgeContainer.setAttribute('role', 'dialog');\n    nudgeContainer.setAttribute('aria-label', 'Checkout Summary');\n    \n    nudgeContainer.innerHTML = `\n      <div class=\"nudge-header\">\n        <div class=\"nudge-type-indicator\">üõí</div>\n        <div class=\"nudge-headline\">Checkout Complete!</div>\n        <div class=\"nudge-title\">${profileEmoji} ${profile.displayName} Smart Shopping</div>\n      </div>\n      <div class=\"checkout-benefits\">\n        ${benefits.map(benefit => `<div style=\"margin-bottom:8px; color:var(--deal-green); font-weight:600; font-size:12px;\">${benefit}</div>`).join('')}\n      </div>\n      <div class=\"checkout-summary\" style=\"margin:16px 0; padding:12px; background:rgba(31,143,78,0.1); border-radius:12px; border:1px solid rgba(31,143,78,0.2);\">\n        <div style=\"font-weight:700; color:var(--brand-navy); margin-bottom:8px;\">Order Summary</div>\n        <div style=\"display:flex; justify-content:space-between; margin-bottom:4px;\">\n          <span style=\"color:var(--muted);\">Items (${session.basket.reduce((sum, item) => sum + item.qty, 0)})</span>\n          <span style=\"font-weight:600;\">¬£${total.toFixed(2)}</span>\n        </div>\n        ${totalSavings > 0 ? `<div style=\"display:flex; justify-content:space-between; margin-bottom:4px; color:var(--deal-green);\">\n          <span>Smart Savings</span>\n          <span style=\"font-weight:700;\">-¬£${totalSavings.toFixed(2)}</span>\n        </div>` : ''}\n        <div style=\"border-top:1px solid rgba(31,143,78,0.3); margin:8px 0; padding-top:8px; display:flex; justify-content:space-between; font-weight:800; font-size:16px; color:var(--brand-navy);\">\n          <span>Total</span>\n          <span>¬£${(total - totalSavings).toFixed(2)}</span>\n        </div>\n      </div>\n      <div class=\"cta-row\">\n        <button id=\"completeBtn\" class=\"btn-primary\">Complete Order</button>\n        <button id=\"continueBtn\" class=\"btn-secondary\">Continue Shopping</button>\n      </div>\n    `;\n    \n    nudgeContainer.classList.add('open');\n    \n    const completeBtn = document.getElementById('completeBtn')!;\n    const continueBtn = document.getElementById('continueBtn')!;\n    \n    completeBtn.onclick = () => {\n      // Show in-app success message\n      showOrderSuccess(profile, totalSavings, smartChoices);\n      \n      // Reset the session after success message\n      setTimeout(() => {\n        session.basket = [];\n        session.scans = [];\n        session.nudgeHistory = [];\n        renderBasket();\n        nudgeContainer.classList.remove('open');\n        nudgeContainer.innerHTML = '';\n      }, 3000);\n    };\n    \n    continueBtn.onclick = () => {\n      nudgeContainer.classList.remove('open');\n      nudgeContainer.innerHTML = '';\n    };\n  }\n\n  // Show in-app order success message\n  function showOrderSuccess(profile: any, totalSavings: number, smartChoices: number) {\n    const profileEmojis: Record<string, string> = {\n      'budget-family': 'üí∞',\n      'health-fitness': 'üí™',\n      'convenience-professional': '‚ö°'\n    };\n\n    const profileEmoji = profileEmojis[currentProfileType];\n    \n    nudgeContainer.innerHTML = `\n      <div class=\"success-animation\" style=\"text-align:center; padding:20px;\">\n        <div style=\"font-size:48px; margin-bottom:16px; animation: bounce 0.6s ease-in-out;\">üéâ</div>\n        <div style=\"font-weight:800; font-size:18px; color:var(--deal-green); margin-bottom:12px;\">\n          Order Placed Successfully!\n        </div>\n        <div style=\"font-weight:600; color:var(--brand-navy); margin-bottom:16px; font-size:14px;\">\n          ${profileEmoji} Thank you for smart shopping with<br>\n          <span style=\"color:var(--brand-orange);\">${profile.displayName}</span> preferences\n        </div>\n        ${totalSavings > 0 ? `<div style=\"background:rgba(31,143,78,0.1); padding:12px; border-radius:12px; border:1px solid rgba(31,143,78,0.2); margin-bottom:16px;\">\n          <div style=\"font-size:14px; font-weight:700; color:var(--deal-green);\">\n            üèÜ You saved ¬£${totalSavings.toFixed(2)} with smart choices!\n          </div>\n        </div>` : ''}\n        <div style=\"color:var(--muted); font-size:12px; margin-bottom:16px;\">\n          Made ${smartChoices} profile-optimized decisions\n        </div>\n        <div class=\"loading-dots\" style=\"display:flex; justify-content:center; gap:4px;\">\n          <div style=\"width:8px; height:8px; background:var(--brand-orange); border-radius:50%; animation: pulse 1.5s infinite;\"></div>\n          <div style=\"width:8px; height:8px; background:var(--brand-orange); border-radius:50%; animation: pulse 1.5s infinite 0.2s;\"></div>\n          <div style=\"width:8px; height:8px; background:var(--brand-orange); border-radius:50%; animation: pulse 1.5s infinite 0.4s;\"></div>\n        </div>\n        <div style=\"color:var(--muted); font-size:11px; margin-top:12px;\">\n          Resetting for next session...\n        </div>\n      </div>\n    `;\n  }\n\n  // Initialize UI\n  renderProfileSelector();\n  renderProfileInfo();\n  renderNudgeTriggerGuide();\n  renderMobileProducts();\n  renderBasket();\n\n  // For demo deployment, simulate online status without backend\n  if (window.location.hostname === 'localhost') {\n    // Ping agentic server in local development\n    fetch('http://localhost:8787/rerank', { \n      method: 'POST', \n      headers: { 'Content-Type': 'application/json' }, \n      body: JSON.stringify({ candidates: [], profile: user }) \n    })\n      .then(() => aiStatusDot?.classList.replace('status-offline','status-online'))\n      .catch(() => aiStatusDot?.classList.replace('status-online','status-offline'));\n  } else {\n    // Show as online for demo deployment\n    aiStatusDot?.classList.replace('status-offline','status-online');\n  }\n}","import { mountEnhancedUI } from './enhancedUI';\nimport './styles.css';\n\nconst app = document.getElementById('app')!;\nmountEnhancedUI(app);\n\n\n"],"names":["urlAlphabet","nanoid","size","id","bytes","scopedUrlAlphabet","RawProducts","ComplementsRaw","MissionsRaw","Catalog","p","sku","promo","product","Complements","MissionRecipes","BasketAnalyzer","basket","item","groupId","products","groups","threshold","g","results","remainder","needed","sample","avgPrice","a","b","regularTotal","dealTotal","saving","CandidateGenerator","session","profile","lastScan","candidates","dietOk","tag","brandOk","allergyOk","s","title","reason","savings","acc","oneAway","substitutes","c","options","best","basketSkus","mission","skus","missing","hour","items","base","premium","it","bulk","perishables","totalPerishables","soonExpiring","prods","NudgeRanker","score","points","ThrottleManager","scansBetweenNudges","totalScans","candidateId","NudgeEngine","event","ranked","resp","data","USER_PROFILES","PROFILE_SCENARIOS","createEnhancedDemo","profileType","engine","user","mountEnhancedUI","root","currentProfileType","scenarios","useAI","profileSelector","profileInfo","mobileProductsGrid","productCount","nudgeContainer","basketEl","aiToggle","phoneBasket","phoneTotal","nudgeTriggerGuide","activityLog","aiStatusDot","checkoutBtn","showCheckoutSummary","renderProfileSelector","key","btn","switchProfile","renderProfileInfo","trait","renderNudgeTriggerGuide","profileEmojis","triggers","scenario","triggerProduct","profileEmoji","newDemo","renderBasket","renderMobileProducts","total","row","prow","triggerSkus","triggerProducts","remainingProducts","allProducts","i","card","handleScan","matchingScenario","customNudge","createCustomNudge","showEnhancedNudge","existing","nudge","triggerSku","updateActivityLog","savingsText","typeEmoji","getTypeEmoji","setupNudgeButtons","showNudge","addBtn","dismissBtn","pillClass","type","totalSavings","smartChoices","benefits","benefit","sum","completeBtn","continueBtn","showOrderSuccess","app"],"mappings":"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","x_google_ignoreList":[0,1]}